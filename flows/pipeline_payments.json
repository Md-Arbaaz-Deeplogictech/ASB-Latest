{
	"name":"Infiniti payment flow",
	"listener": {
		"type":"file", 
		"isMessageGenerator": true,
		"path":"c:/users/rohit kapoor/source/json_esb/in/TestPayments.csv",
		"donePath":"c:/users/rohit kapoor/source/json_esb/processing",
		"interval":1000
	},
	"route0":{
		"type": "csvfilereader",
		"dependencies":["listener"],
		"isMessageConsumer": true,
		"rowsPerChunk": 10000,
		"skip_first_row":true
	},
	"route1": {
		"type":"csvparser",
		"dependencies":["route0"],
		"csv_headers":["FacilityName","ClaimID","ChargeFromDate1","ChargeEnteredDate1","CPTCode","RevCode","PatientID","PatientName","PaymentAmt","PaymentDate1","PaymentCheckNo","PayerName","Charge To Date","Charge Units"]
	},
	"route2": {
		"type":"js",
		"dependencies":["route1"],
		"js":"if (((record.RevCode == '0912') || (record.RevCode == '1002') || record.RevCode == '0915')) && (record.CPTCode == 'G0479')) record.RevCode = '';"
	},
	"output": {
		"type": "aiinsights_record",
		"dependencies":"route2",
		"index": "payments",
		"fieldtypes":{
			"ChargeFromDate1":"date",
			"ChargeEnteredDate1":"date"
		}
	},
	"garbageCollector": {
		"type": "simple",
		"dependencies":"output",
		"isMessageConsumer": true
	}
}